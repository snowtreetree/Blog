# HTTP

## 是什么？

超文本传输协议，Hyper Text Transfer Protocol。从服务器传输超文本标记语言（HTML）到本地浏览器的协议。在服务器和客户端之前传输文本、音频、图片等内容的约定和规范。

- 超文本 超越普通文本。文本、图片、音频、视频等内容。
- 传输 将内容/数据从一方传到另一方。说明HTTP是双向的协议，双方数据的传输过程，可能经过多个中间人（其中就包含了安全认证，数据压缩，编码转换）。不能用于广播、寻址。
- 协议 双方/多方之间的一个约定，在HTTP中，规定了计算机之间的通信规范，以及各种控制和错误处理方式。

## 原理

HTTP需要与其他协议协作（不是单独存在的），一个基于 TCP/IP 通信协议来传递数据的协议，可传输数据包括HTML文件、图片、音频等，属于应用层，一般用不B/S架构。

:::tip
应用层还有其他协议：  
FTP：文件传输协议，用来在客户机和FTP服务器之间的传输数据（用来在两台计算机之间传输文件）  
DNS域名系统：域名到IP之间的解析服务  
SMTP：邮件发送协议  
POP3：邮件接收协议  
DHCP：动态主机配置协议
:::

## 特点

- 支持客户端/服务端模式，也是一种请求/响应模式的协议
- 简单快速，发送请求时，只需传输请求方法和路径就可以，常见方法GET、POST、OPTIONS、HEAD
- 灵活可拓展：允许传输多种类型的数据，例如文本、图片、音频等，传输类型通过Content-Type标记
- 无状态，每次请求不保存之前发送请求的状态，每次都是独立的
- 持久连接，需要配置Connection: keep-alive(HTTP/1.1默认开启)。建立一次TCP请求，可多次请求/响应。出现原因，没进行一次HTTP请求，都会进行一次TCP连接，连接和开销较大，耗时。

## 缺点

- 明文传输。使用文本，非二进制数据
- 无法验证报文完整性。内容可能被篡改
- 不验证通信方的身份，可能会被伪造。
- 无状态
- 队头阻塞


## 请求方法

- GET：获取资源，幂等操作
- HEAD：获取报文首部，类似于GET，但是不返回报文主体，幂等操作
- POST：更新/创建资源，非幂等操作
- PUT：更新/创建资源，幂等操作
- PATCH： 内容局部更新，幂等操作
- DELETE：删除资源/数据，幂等操作
- OPTIONS：插叙服务器支持的方法，是否跨域，幂等操作

:::tip
幂等，多次操作，返回的结果是一致的。
PUT
:::

### GET、POST区别

- GET会被浏览器缓存下来，POST不会
- GET只能进行URL编码，只能接收ASCII字符，POST没限制
- GET参数方法哦URL上，POST放到请求里
- 幂等性

:::tip
URL和URI的区别
URI：Uniform Resource Identifier 统一资源标识符  
URL：Uniform Resource Location 统一资源定位符
URI 是用来标示 一个具体的资源的，我们可以通过 URI 知道一个资源是什么。

URL 则是用来定位具体的资源的，标示了一个具体的资源位置。互联网上的每个文件都有一个唯一的URL。  
:::

## 报文

### 请求

- 请求行  
请求行包括，请求方法、URL、协议/版本
- 请求头
    - connective:
    - Origin:
    - User-Agent:
    - Accept-Encoding:
    ...
- 请求正文


### 响应

- 响应行  
    响应行包括，协议/版本，响应状态
- 响应头
    - Date:
    - Set-Cookie:
    - Cache-Control:
    - Expires:
    - Etag:
    - Last-Modified:
- 响应正文

### 状态码

#### 1xx，请求已收到，需进一步处理

#### 2xx，成功状态

    - 200 OK，成功返回，带有响应体
    - 204 No Content，成功返回，不带实体

#### 3xx，重定向

    - 301，永久重定向，浏览器缓存，下次访问，直接跳转到定向地址
    - 302，临时重定向，不缓存
    - 303，临时重定向，但是表示应该用GET
    - 304，缓存相关
#### 4xx，请求错误

    - 400，请求报文语法错误
    - 401，需要有通过HTTP认证的认证信息或者表示用户认证失败
    - 403，请求被拒绝
    - 404，请求资源未找到

#### 5xx，服务端错误

    - 500，服务器内部错误
    - 501，客户端请求，服务器不支持
    - 502，服务器正常，代理服务器无法获取合法响应
    - 503 ，服务器超负荷，或停机维护
